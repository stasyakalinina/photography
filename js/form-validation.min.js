var form=document.querySelector(".message__form"),elements=form.querySelectorAll(".message__field"),btn=form.querySelector(".message__btn"),patternName=/^[а-яА-ЯёЁa-zA-Z]+$/,patternMail=/^[A-Za-z0-9](([_\.\-]?[a-zA-Z0-9]+)*)@([A-Za-z0-9]+)(([\.\-]?[a-zA-Z0-9]+)*)\.([A-Za-z])+$/i,patternSpam=/[^\<\>\[\]%\&'`]+$/,errorMess=["Незаполненное поле ввода","Введите ваше реальное имя","Укажите вашу электронную почту","Неверный формат электронной почты"],isError=!1,popup=document.querySelector(".modal-message"),close=popup.querySelector(".modal-close");function validateForm(e){e.preventDefault();var r,t=getFormData(form);for(var a in t)0!=(r=getError(t,a)).length&&(isError=!0,showError(a,r));return isError||popup.classList.add("modal-show"),!1}function getFormData(e){for(var r={},t=0;t<e.elements.length;t++){var a=e.elements[t];"button"!=a.tagName.toLowerCase()&&"textarea"!=a.tagName.toLowerCase()&&(r[a.name]=a.value)}return r}function getError(e,r){var t="";return{username:function(){0!=e.username.length&&0!=patternName.test(e.username)||(t=errorMess[1])},usermail:function(){0==e.usermail.length?t=errorMess[2]:0==patternMail.test(e.usermail)&&(t=errorMess[3])}}[r](),t}function showError(e,r){var t=form.querySelector("[name="+e+"]"),a=t.nextElementSibling;t.classList.add("message__field--error"),a.innerHTML=r,a.style.display="block"}function cleanError(e){var r=e.nextElementSibling;e.classList.remove("message__field--error"),r.style.display="none"}btn.addEventListener("click",validateForm),form.addEventListener("focus",function(){var e=document.activeElement;e!==btn&&cleanError(e)},!0),close.addEventListener("click",function(e){e.preventDefault(),popup.classList.remove("modal-show"),form.reset()});
